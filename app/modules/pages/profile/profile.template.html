<div class="row" style="padding: 15px;">
  <div class="col-xs-6 col-md-4">
    <div class="project" style="background-color: white;">
      <h4>PROFILO</h4>
      <form class="form" ng-submit="updateUser()">
        <input type="hidden" ng-model="updateForm._id">
        <p>
          <span>Username*: </span>
          <span ng-hide='showInput'>{{user.username}}</span>
          <input type="text" ng-show='showInput' class="form-control" ng-model="updateForm.username" required>
        </p>
        <p>
          <span>Nome*: </span>
          <span ng-hide='showInput'>{{user.name}}</span>
          <input type="text" ng-show='showInput' class="form-control" ng-model="updateForm.name" required>
        </p>
        <p>
          <span>Cognome*: </span>
          <span ng-hide='showInput'>{{user.surname}}</span>
          <input type="text" ng-show='showInput' class="form-control" ng-model="updateForm.surname" required>
        </p>
        <p>
          <span>Email*: </span>
          <span ng-hide='showInput'>{{user.email}}</span>
          <input type="text" ng-show='showInput' class="form-control" ng-model="updateForm.email" required>
        </p>
        <p>
          <span>Data nascita*: </span>
          <span ng-hide='showInput'>{{user.bornDate}}</span>
          <input type="text" ng-show='showInput' class="form-control" ng-model="updateForm.bornDate" required>
        </p>
        <p>
          <span>Telefono: </span>
          <span ng-hide='showInput'>{{user.telephone}}</span>
          <input type="text" ng-show='showInput' class="form-control" ng-model="updateForm.telephone">
        </p>
        <hr>
        <p><span>Indirizzo</span></p>
        <p>
          <span>Via: </span>
          <span ng-hide='showInput'>{{user.address.street}}</span>
          <input type="text" ng-show='showInput' class="form-control" ng-model="updateForm.address.street">
        </p>
        <p>
          <span>Città*: </span>
          <span ng-hide='showInput'>{{user.address.city}}</span>
          <input type="text" ng-show='showInput' class="form-control" ng-model="updateForm.address.city">
        </p>
        <p>
          <span>Nazione*: </span>
          <span ng-hide='showInput'>{{user.address.nation}}</span>
          <input type="text" ng-show='showInput' class="form-control" ng-model="updateForm.address.nation">
        </p>
        <p>
          <span>CAP*: </span>
          <span ng-hide='showInput'>{{user.address.CAP}}</span>
          <input type="text" ng-show='showInput' class="form-control" ng-model="updateForm.address.CAP">
        </p>
        <div>
          <a class="btn btn-warning" ng-click='toggleShowInput()'>Modifica</a>
          <button class="btn btn-success" type="submit" ng-disabled="disabled">Salva</button>
        </div>
        <br>
        <div><i>* obbligatorio</i></div>
      </form>
      <div style="margin-top:10px"></div>
      <div ng-show="error" class="alert alert-danger">{{errorMessage}}</div>
      <div ng-show="success" class="alert alert-success">{{successMessage}}</div>
    </div>
  </div>
  <div class="col-xs-6 col-md-4">
    <div class="project" style="background-color:white;">
      <h4>CARTE ASSOCIATE</h4>
      <form class="form" ng-submit="addCard()">
        <input type="hidden" ng-model="updateForm._id">
        <p>
          <span>Numero di carta*: </span>
          <input type="text" class="form-control" ng-model="cardForm.number" required>
        </p>
        <p>
          <span>Scadenza*: </span>
          <input type="text" class="form-control" ng-model="cardForm.endDate" maxlength="5" required>
        </p>
        <p>
          <span>CVV*: </span>
          <input type="text" class="form-control" ng-model="cardForm.cvv" maxlength="4" required>
        </p>
        <button class="btn btn-success" type="submit">Aggiungi</button>
      </form>

      <div ng-show="cardError" class="alert alert-danger">{{cardErrorMessage}}</div>

      <form ng-repeat="card in user.cards" class="form" ng-submit="deleteCard(card._id, user._id)" id="form-{{card._id}}">
        <hr>
        <p>
          <span>Numero (oscurare): </span>
          <span>{{card.number}}</span>
        </p>
        <p>
          <span>Scadenza: </span>
          <span>{{card.endDate}}</span>
        </p>
        <p>
          <span>CVV (togliere): </span>
          <span>{{card.cvv}}</span>
        </p>
        <button class="btn btn-danger" type="submit">Elimina</button>
      </form>
    </div>
  </div>


  <div class="col-xs-6 col-md-4">
    <div class="project" style="background-color: white;">
      <h4>INVIA DENARO</h4>
      <form class="form"  ng-submit="sendMoney()">
        <input type="hidden" ng-model="updateForm._id">
        <div>
          <span>Username destinatario*: </span>
          <div mass-autocomplete>
            <input type="text" class="form-control" ng-model="dirty.value" mass-autocomplete-item="autocomplete_options" required>
            <input type="hidden" ng-model="selected_user._id" required>
          </div>
        </div>
        <p>
          <span>Importo*: </span>
          <input type="number" class="form-control" ng-model="money" min="1.00" max="10000.00" step="0.01" required>
        </p>
        <p>Invia a <u>{{selected_user.username}}</u> una somma di €{{money}}</p>
        <p>
          <span>Messaggio: </span>
          <textarea class="form-control" ng-model="message"></textarea>
        </p>
        <button class="btn btn-success" type="submit">Invia</button>
      </form>
      <div ng-show="moneyError" class="alert alert-danger">{{moneyErrorMessage}}</div>

      <div ng-repeat="tran in transactions">
        <hr>
        <div>Data: {{tran.date}}</div>
        <div>Mittente: {{tran.senderName}}</div>
        <div>Destinatario: {{tran.recipientName}}</div>
        <div>Importo: €{{tran.money | number:2}}</div>
        <div ng-if="tran.notes">Messaggio: {{tran.notes}}</div>
      </div>
    </div>
  </div>
</div>


<!--<div ng-repeat="(key, value) in userForm" >
  <label>{{key}}</label>
  <input type="text" ng-model="value" />
    <br/>
</div>-->
